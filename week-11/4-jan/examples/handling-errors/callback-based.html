<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Handling errors - Callback based</title>
    <script type="module">
      /* We're now accepting a callback, which will be fired
      when the image has loaded. This let's the "outside world"
      become aware of when the image has loaded. */
      function loadImage(src, callback) {
        const img = document.createElement("img");
        img.src = src;

        img.addEventListener("load", () => {
          console.log("loaded!");
          /* We call the provided callback as soon as the event
          is fired. */
          callback();
        });

        document.body.append(img);
      }

      loadImage(
        "https://media.istockphoto.com/photos/feline-picture-id108226626?k=20&m=108226626&s=612x612&w=0&h=bDaWwxhcygjerdR71qQu8YFSXaDUIi_HUZV2AADg5L8=",
        /* This callback will be executed as soon as our image has loaded. */
        () => {
          const p = document.createElement("p");
          p.textContent = "The image loaded!";
          document.body.append(p);
        }
      );

      console.log("After initiating loading of image!");
    </script>
  </head>
  <body></body>
</html>
